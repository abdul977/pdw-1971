<!DOCTYPE html> <!-- HTML5 document type declaration -->
<html lang="en"> <!-- Root element with English language specification for accessibility -->
<head>
    <!-- Character encoding for proper text display -->
    <meta charset="UTF-8">

    <!-- Responsive viewport meta tag for mobile-first design -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Page title shown in browser tab and search results -->
    <title>Offline PWA Demo</title>

    <!-- SEO meta description for search engines -->
    <meta name="description" content="A Progressive Web App demonstrating offline capabilities">

    <!-- PWA theme color - affects browser UI elements and status bar -->
    <meta name="theme-color" content="#2196F3">

    <!-- PWA Manifest - links to app configuration file -->
    <link rel="manifest" href="manifest.json">

    <!-- iOS specific meta tags for proper PWA behavior on Apple devices -->
    <meta name="apple-mobile-web-app-capable" content="yes"> <!-- Enable full-screen mode -->
    <meta name="apple-mobile-web-app-status-bar-style" content="default"> <!-- Status bar appearance -->
    <meta name="apple-mobile-web-app-title" content="Offline PWA"> <!-- App name on iOS home screen -->
    <link rel="apple-touch-icon" href="icons/icon-192x192.png"> <!-- iOS home screen icon -->

    <!-- Favicon for browser tab -->
    <link rel="icon" type="image/png" sizes="32x32" href="icons/icon-32x32.png">

    <!-- Main stylesheet -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Main container for all page content -->
    <div class="container">
        <!-- Page header with title and status indicators -->
        <header>
            <h1>🚀 Offline PWA Demo</h1> <!-- Main page title with emoji for visual appeal -->
            <div class="status-indicator">
                <!-- Online/offline status indicator - updated by JavaScript -->
                <span id="online-status" class="status online">Online</span>
                <!-- PWA install button - shown when app can be installed -->
                <button id="install-btn" class="install-btn" style="display: none;">Install App</button>
            </div>
        </header>

        <!-- Main content area -->
        <main>
            <!-- PWA features showcase section -->
            <section class="feature-section">
                <h2>📱 PWA Features</h2>
                <!-- Grid layout for feature cards -->
                <div class="feature-grid">
                    <!-- Individual feature cards highlighting PWA capabilities -->
                    <div class="feature-card">
                        <h3>🔄 Offline Support</h3>
                        <p>Works without internet connection</p>
                    </div>
                    <div class="feature-card">
                        <h3>📦 Installable</h3>
                        <p>Install like a native app</p>
                    </div>
                    <div class="feature-card">
                        <h3>🔄 Background Sync</h3>
                        <p>Sync data when back online</p>
                    </div>
                    <div class="feature-card">
                        <h3>⚡ Fast Loading</h3>
                        <p>Cached resources load instantly</p>
                    </div>
                </div>
            </section>

            <!-- Interactive demo section -->
            <section class="demo-section">
                <h2>🎯 Offline Demo</h2>

                <!-- Cached Content Demo - demonstrates service worker caching -->
                <div class="demo-card">
                    <h3>📄 Cached Content</h3>
                    <p>This content is cached and available offline</p>
                    <!-- Button to trigger cached content loading -->
                    <button id="load-cached-data" class="btn">Load Cached Data</button>
                    <!-- Container for displaying cached content -->
                    <div id="cached-content" class="content-area"></div>
                </div>

                <!-- Offline Form Demo - demonstrates background sync -->
                <div class="demo-card">
                    <h3>📝 Offline Form</h3>
                    <p>Submit forms offline - they'll sync when you're back online</p>
                    <!-- Form that works offline using background sync -->
                    <form id="offline-form">
                        <!-- Name input field with validation -->
                        <input type="text" id="name" placeholder="Your name" required>
                        <!-- Message textarea with validation -->
                        <textarea id="message" placeholder="Your message" required></textarea>
                        <!-- Submit button that queues data when offline -->
                        <button type="submit" class="btn">Submit (Works Offline)</button>
                    </form>
                    <!-- Status message area for form feedback -->
                    <div id="form-status" class="status-message"></div>
                </div>

                <!-- API Demo - demonstrates network-first with cache fallback -->
                <div class="demo-card">
                    <h3>🌐 API with Offline Fallback</h3>
                    <p>Try this with and without internet connection</p>
                    <!-- Button to fetch data from external API -->
                    <button id="fetch-data" class="btn">Fetch Random Quote</button>
                    <!-- Container for displaying API response or cached data -->
                    <div id="api-content" class="content-area"></div>
                </div>
            </section>

            <!-- Background sync status section -->
            <section class="sync-section">
                <h2>🔄 Background Sync Status</h2>
                <!-- Sync status display and controls -->
                <div id="sync-status" class="sync-status">
                    <!-- Counter for pending sync items -->
                    <p>Pending sync items: <span id="pending-count">0</span></p>
                    <!-- Manual sync trigger button -->
                    <button id="force-sync" class="btn">Force Sync</button>
                </div>
                <!-- Log area for sync operation messages -->
                <div id="sync-log" class="sync-log"></div>
            </section>

            <!-- Development Journey section -->
            <section class="journey-section">
                <h2>🚀 Development Journey</h2>
                <div class="journey-content">
                    <p>Building this PWA was a journey of solving real user problems, not just implementing technical requirements. The challenge wasn't just making things work offline—it was creating an experience that feels natural whether you're connected or not.</p>

                    <div class="journey-highlights">
                        <div class="journey-card">
                            <h3>🎯 User-First Approach</h3>
                            <p>Started by understanding three core scenarios: reading content offline, submitting forms on spotty connections, and working with cached vs. fresh data. Every technical decision serves the goal of better user experience.</p>
                        </div>

                        <div class="journey-card">
                            <h3>⚡ Smart Caching Strategies</h3>
                            <p>Implemented three-tier caching: cache-first for static assets (instant loading), network-first for APIs (fresh data when possible), and stale-while-revalidate for the best of both worlds.</p>
                        </div>

                        <div class="journey-card">
                            <h3>🔄 Robust Background Sync</h3>
                            <p>Built a queuing system that handles partial failures, retry logic, and data consistency. Forms work offline and sync seamlessly when connectivity returns, with clear user feedback throughout.</p>
                        </div>

                        <div class="journey-card">
                            <h3>🌐 Cross-Browser Reality</h3>
                            <p>Implemented feature detection and graceful degradation for varying PWA support across browsers. Chrome and Edge excel, Firefox has limitations, Safari has quirks—but users get a good experience everywhere.</p>
                        </div>

                        <div class="journey-card">
                            <h3>🎨 Intentional Design</h3>
                            <p>Evolved from technical demo to user-focused application with glassmorphism design, real-time status indicators, and clear feedback. Offline mode feels intentional, not like a failure state.</p>
                        </div>

                        <div class="journey-card">
                            <h3>🔧 Development Tools</h3>
                            <p>Built with assistance from Gemini 2.0 Flash through Kilo Code by Google, which helped debug complex service worker issues and optimize caching strategies for better performance.</p>
                        </div>
                    </div>

                    <div class="journey-conclusion">
                        <p><strong>Key Insight:</strong> Building a good PWA isn't just about implementing APIs correctly—it's about understanding how people actually use applications and designing offline experiences that feel natural and helpful rather than like compromises.</p>
                    </div>
                </div>
            </section>
        </main>

        <!-- Page footer with instructions -->
        <footer>
            <p>PWA Demo - Works Offline! 🎉</p>
            <p>Try disconnecting your internet and refreshing the page</p>
        </footer>
    </div>

    <!-- Loading indicator overlay - shown during async operations -->
    <div id="loading" class="loading" style="display: none;">
        <div class="spinner"></div> <!-- CSS animated spinner -->
        <p>Loading...</p>
    </div>

    <!-- Notification banner - shown for user feedback -->
    <div id="notification" class="notification" style="display: none;">
        <span id="notification-text"></span> <!-- Notification message text -->
        <button id="notification-close">×</button> <!-- Close button -->
    </div>

    <!-- Main application JavaScript - handles all PWA functionality -->
    <script src="app.js"></script>
</body>
</html>
